{% extends "layout.html" %}
{% block content %}

<script src="https://code.jquery.com/jquery-3.1.0.js"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.1/html2pdf.bundle.min.js"></script>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        /* Popup container - can be anything you want */
        .popup {
            position: relative;
            display: inline-block;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        /* The actual popup */
        .popup .popuptext {
            visibility: hidden;
            width: 800px;
            background-color: #555;
            font-size: 12pt;
            color: #fff;
            text-align: left;
            border-radius: 12px;
            padding: 20px 20px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 10%;
            margin-left: 80px;
        }

        /* Popup arrow */
        .popup .popuptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 9.5%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #555 transparent transparent transparent;
        }

        /* Toggle this class - hide and show the popup */
        .popup .show {
            visibility: visible;
            -webkit-animation: fadeIn 1s;
            animation: fadeIn 1s;
        }

        /* Show the tooltip text when you mouse over the tooltip container */
        .popup:hover .popuptext {
            visibility: visible;
        }

        /* Add animation (fade in the popup) */
        @-webkit-keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        table {
            border-collapse: collapse;
            border-spacing: 0;
            width: 600px;
            height: 600px;
            overflow: scroll;
            border: 1px solid #ddd;
        }

        th,
        td {
            text-align: left;
            padding: 16px;
        }

        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
    </style>
</head>

<div id="home" class="container mx-auto p-4" x-data="{fileSelected: '', choice: null, files: {{files}}}">
    <div class="flex flex flex-col space-y-4">

        <script src="../../static/js/jquery-3.5.1.min.js"></script>

        <!-- Method to change the visable sections -->
        <script>

            $(document).ready(function () {
                $("div.methodology_desc").hide();

                $("#kde_Input").hide();
                $("#csv_Title").hide();
                $("#csv_Null_Title").hide();
                $("#csv_Null_Results").hide();
                $("#csv_Class_Balance_Title").hide();
                $("#csv_Class_Balance_Results").hide();
                $("#csv_Scale_Title").hide();
                $("#csv_Scale_Results").hide();

                $("#kde_Input_Preopt").hide();
                $("#csv_Title_Preopt").hide();
                $("#csv_Null_Title_Preopt").hide();
                $("#csv_Null_Results_Preopt").hide();
                $("#csv_Class_Balance_Title_Preopt").hide();
                $("#csv_Class_Balance_Results_Preopt").hide();
                $("#csv_Scale_Title_Preopt").hide();
                $("#csv_Scale_Results_Preopt").hide();

                $("input[name$='methodology' ]").click(function () {
                    var methodology = $(this).val();
                    var num = 0
                    var count = 1

                    if (methodology == "MLA") {
                        $("div.methodology_desc").hide(); // Hidding class div with methodology_desc
                        $("#metrics").show();
                        $("#MLA_Options").show();
                        $("#MLAI_Form").show();
                        $("#NLP_button").hide();

                    }

                    if (methodology == "DLANN") {
                        $("div.methodology_desc").hide();
                        $("#DLANN_Options").show();
                        $("#metrics").show();
                        $("#MLAI_Form").show();
                        $("#NLP_button").hide();
                        getCompilerOptions("Compile_Selection")
                        getValidationOptions("Validation_Selection")
                    }

                    if (methodology == "NLP") {
                        $("div.methodology_desc").hide();
                        $("#NLP_Options").show();
                        $("#metrics").hide();
                        $("#MLAI_Form").hide();
                        $("#NLP_button").show();
                        // getCompilerOptions("Compile_Selection")
                        // getValidationOptions("Validation_Selection")
                    }
                });
            });


            // Get references to the radio button and checkboxes container
            //   const regressionRadio = document.getElementById("regressionRadio");
            //   const checkboxesContainer = document.getElementById("checkboxesContainer");

            //   // Add event listener to the radio button
            //   regressionRadio.addEventListener("change", function() {
            //     // Check if the radio button is selected
            //     if (regressionRadio.checked) {
            //       // Uncheck all checkboxes within the checkboxes container
            //       const checkboxes = checkboxesContainer.querySelectorAll('input[type="checkbox"]');
            //       checkboxes.forEach(function(checkbox) {
            //         checkbox.checked = false;
            //       });
            //     }
            //   });

        </script>


        <!-- Goal and Scope -->
        <div class="flex flex-col space-y-4 mb-2 mt-4 py-4 px-2 border-b border-gray-400">
            <h1 class="mb-2 font-bold text-xl">Goal and Scope</h1>

            <h4 class="mb-2 max-w-xs font-medium flex flex-row">
                <span class="mr-2">Project Name</span>
                <div class="flex flex-row">
                    <div class="popup flex flex-row space-x-2" onclick="popupInformation('Experiment_Name_Info')">
                        <img src="../../static/Images/information_icon.png" class="popup" width="20" height="20" />
                        <span class="popuptext" id="Experiment_Name_Info"> Define the purpose or objective of your project.</span>
                    </div>

            </h4>
            <!-- information to display for the name of the project -->
            <div class="flex flex-col items-end gap-6 w-96">
                <div class="relative w-full min-w-[200px]">
                    <input
                        class="peer h-full min-h-[50px] w-full resize-none border-b border-black bg-transparent pt-4 pb-1.5 font-sans text-sm font-normal text-blue-gray-700 outline outline-0 transition-all placeholder-shown:border-blue-gray-200 focus:border-gray-900 focus:outline-0 disabled:resize-none disabled:border-0 disabled:bg-blue-gray-200"
                        id="projectName" type="text" name="projectName" placeholder="Name of the project">
                </div>
            </div>

            <div class="">
                <div class="flex flex-row">
                    <h3 class="mb-2 font-medium mr-2">Goal and Scope</h3>
                    <!-- information to display for the definition of the project -->
                    <div class="popup" onclick="popupInformation('Experiment_Definition_Info')">
                        <img src="../../static/Images/information_icon.png" width="20" height="20" />
                        <span class="popuptext" id="Experiment_Definition_Info">Define the purpose and boundaries of
                            your project.
                        </span>
                    </div>
                </div>

                <textarea id="phase1Text" name="phase1Text" rows="3" cols="50"
                    class="resize w-72 px-2 py-1 border border-gray-400 rounded-xl bg-white"></textarea>

            </div>

        </div>

        <!-- Dataset section -->
        <div class="border-b border-gray-400 p-2">
            <h1 class="mb-2 font-bold text-xl">Data</h1>
            <form id="csvForm" @submit.prevent="checkCSV(files, fileSelected, choice)">
                <div class="mb-2">
                    Data Type:
                    {% if g.Data_Types %}
                    <select id="types" class="px-2 py-1 mr-2 rounded-md border border-gray-400" name="Types"
                        onchange="changeDataType(this.id)">
                        {% for choices, names, infos in g.Data_Types%}
                        <option value={{ choices }}>{{ names }}</option>
                        {% endfor %}
                    </select>
                    {% endif %}
                </div>

                <div class="flex flex-col">
                    <div class="flex flex-row">
                        <h3 class="mr-2">File </h3>
                        <!-- information to display for the loadable dataset -->
                        <div class="popup" onclick="popupInformation('Experiment_Dataset_Info')">
                            <img src="../../static/Images/information_icon.png" width="20" height="20" />
                            <span class="popuptext" id="Experiment_Dataset_Info">
                            Upload or choose your CSV file
                            </span>
                        </div>
                    </div>

                    <!-- <input type="file"
                                 id="csvFile"
                                 class="input-csv selection-csv mb-2 file:px-2 file:py-1 file:my-1 file:bg-violet-500 file:text-white file:font-medium file:text-sm file:rounded-full file:border-none"
                                 name="csvFile" accept=".csv" onchange="changeCSV()"> -->

                    <div class="flex flex-col" id="previewTableInput">
                        <div class="flex flex-col mb-3 space-y-2 mb-2">
                            <fieldset class="flex items-center mb-2" id="upload_group_1">
                                <input type="radio" name="new_upload" x-model="choice" value="Upload new CSV">
                                <label class="ml-2" for="upload_group_1">Upload CSV</label>
                            </fieldset>
                            <fieldset class="flex items-center mb-2" id="upload_group_2">
                                <input type="radio" name="uploaded" x-model="choice" value="Choose uploaded file">
                                <label class="ml-2" for="upload_choice_2">Choose uploaded CSV</label>
                            </fieldset>
                        </div>

                        <div class="flex flex-col max-w-xs">
                            <input type="file" id="csvFile" x-ref="csv" x-show="choice == 'Upload new CSV'"
                                @change="changeCSV($refs.csv.files[0], $refs.csv.files[0], choice)"
                                class="input-csv selection-csv mb-2" name="File Upload" accept=".csv, .npy"
                                v-model="process.filename" />

                            <select class="px-2 py-1 mr-2 rounded-md border border-gray-400"
                                x-show="choice == 'Choose uploaded file'" x-ref="select_file"
                                @change="changeCSV(files, fileSelected, choice)" x-model="fileSelected">
                                <option>Select file</option>
                                <template x-for="file in {{files}}">
                                    <option x-text="file.filename" class="mb-2"></option>
                                </template>
                            </select>
                        </div>
                    </div>
                    <!-- <form id="Text_Form"> -->
                    <div id="previewTextInput" style="display: none;">
                        <textarea id="previewText" name="previewText" rows="5" cols="50"
                            class="resize w-96 min-h-96 px-2 py-1 border border-gray-400 rounded-xl bg-white"></textarea>
                    </div>
                    <!-- </form> -->
                </div>
                <div id="class_col_section"></div>

                <div id="kde_Input">
                    <label>Kernel Density Estimates (KDE) ind value. (optional)</label>
                    <div class="popup" onclick="popupInformation('KDE_IND_Info')">
                        <img src="../../static/Images/information_icon.png" width="20" height="20" />
                        <span style="" class="popuptext" id="KDE_IND_Info">A KDE plot visualizes data distribution using a continuous probability density curve, similar to a histogram.</span>
                        <!-- <span style="white-space: pre-wrap" class="popuptext" id="KDE_IND_Info">A kernel density
                            estimate (KDE) plot is a method for visualizing the distribution of observations in a
                            dataset, analogous to a histogram. KDE represents the data using a continuous probability
                            density curve in one or more dimensions.<br><br>Relative to a histogram, KDE can produce a
                            plot that is less cluttered and more interpretable, especially when drawing multiple
                            distributions. But it has the potential to introduce distortions if the underlying
                            distribution is bounded or not smooth. Like a histogram, the quality of the representation
                            also depends on the selection of good smoothing parameters.<br><br>Evaluation points for the
                            estimated PDF. If None (default), 1000 equally spaced points are used. If ind is a NumPy
                            array, the KDE is evaluated at the points passed. If ind is an integer, ind number of
                            equally spaced points are used.\n\nGiving an int value will calculate the KDE for all
                            columns when considering each class.</span> -->
                    </div>
                    <input id="kde_ind" class="w-64 px-2 py-1 border border-gray-400 rounded-lg bg-white" type="text"
                        name="kde_ind"> <br>
                </div>

                <button type="submit" class="px-2 px-1.5 my-2 rounded-lg bg-white border border-gray-400" name="submit">
                    Check </button>

                <p id="csv_Error"></p>
                <p id="csv_Title">CSV values:</p>
                <div style="overflow: auto; max-height: 1000px; max-width: 1100px; ">
                    <p id="csv_Results" style="background-color: white;"></p>
                </div>
                <p id="csv_Null_Title">Null instances:</p>
                <p id="csv_Null_Results" style="background-color: white;"></p>
                <p id="csv_Class_Balance_Title">Number of Class Instances:</p>
                <p id="csv_Class_Balance_Results" style="background-color: white;"></p>
                <p id="csv_Scale_Title">KDE plots for each class:</p>
                <div style="overflow: auto; max-height: 600px; max-width: 600px; ">
                    <p id="csv_Scale_Results" style="background-color: white;"></p>
                </div>
            </form>
        </div>


        <!-- Preprocess section-->
        <div class="border-b border-gray-400 p-2">
            <h1 class="mb-2 font-bold text-xl">Preprocessing (Optional)</h1>
            <form id="preoptForm">

                <!-- Dynamically pull preoptimization options and create new identifyer when selected. -->
                Category:
                {% if g.preopt_Categories %} <!-- just the name, display names, and the definition of all catagories-->
                <select id="preopt_categories" class="px-2 py-1 mr-2 rounded-md border border-gray-400"
                    name="preopt_categories" onchange="changePreoptCategory(this.id,'preopts')">
                    {% for choices, names, infos in g.preopt_Categories%}
                    <option value={{ choices }}>{{ names }}</option>
                    {% endfor %}
                </select>
                {% endif %}
                Optimizer:
                {% if g.preopts %} <!-- contains standardizationm optimizers(name, displayName, definition)-->
                <select id="preopts" class="px-2 py-1 mr-2 rounded-md border border-gray-400" name="preopts">
                    {% for choices, names, infos in g.preopts%}
                    <option value={{ choices }}>{{ names }}</option>
                    {% endfor %}
                </select>
                <button type="button" id="AddPreopts" class="px-2 px-1.5 rounded-lg bg-white border border-gray-400"
                    onclick="selectPreopt('preopts', 'Preopt_Selection')">Add</button>
                <!-- Just takes the parameter for specifc optimizer and add it in the Preopt_selection div-->
                <button type="button" id="clearPreopts" class="px-2 px-1.5 rounded-lg bg-white border border-gray-400"
                    onclick="clearAllPreopt()"> Remove All </button>
                {% endif %}

                <div id="Preopt_Selection"></div>

                <button type="submit" class="my-2 px-2 px-1.5 rounded-lg bg-white border border-gray-400" value="Check"
                    onclick="changePreoptSubmit('Check')"> Check </button>
                <!-- This submits the code submits the form search for checkCSV_Preopt in cycon js-->

                <p id="csv_Error_Preopt"></p>
                <p id="csv_Title_Preopt">CSV values:</p>
                <div style="overflow: auto; max-height: 1000px; max-width: 1100px; ">
                    <p id="csv_Results_Preopt" style="background-color: white;"></p>
                </div>
                <p id="csv_Null_Title_Preopt">Null instances:</p>
                <p id="csv_Null_Results_Preopt" style="background-color: white;"></p>
                <p id="csv_Class_Balance_Title_Preopt">Number of Class Instances:</p>
                <p id="csv_Class_Balance_Results_Preopt" style="background-color: white;"></p>
                <p id="csv_Scale_Title_Preopt">KDE plots for each class:</p>
                <div style="overflow: auto; max-height: 600px; max-width: 600px; ">
                    <p id="csv_Scale_Results_Preopt" style="background-color: white;"></p>
                </div>

                <button type="submit" class="px-2 px-1.5 rounded-lg bg-white border border-gray-400" value="Download"
                    onclick="changePreoptSubmit('Download')"> Download </button>
            </form>
        </div>

        <!-- Preprocess section-->
        <div class="border-b border-gray-400 p-2">
            <h1 class="mb-2 font-bold text-xl">Method</h1>
            <form id="methodologyForm">

                <!-- Methodology section 1 -->
                {% if g.Methodologies %}

                {% for choices, name, infos in g.Methodologies%}
                <input type="radio" id={{ choices }} name="methodology" value={{ choices }}> <label for={{ choices }}>{{
                    name }}</label>
                {% for sentence in infos%}
                {% if sentence != null and sentence != ""%}
                <!-- information to display for the selectable methodology section
                             Its a mess and will need to fix later as the onclick will not accept variables...-->
                {% if "MLA" in choices%}
                <div class="popup" onclick="popupInformation('MLA_info')">
                    <img src="../../static/Images/information_icon.png" width="20" height="20" />
                    <span style="white-space: pre-wrap" class="popuptext" id="MLA_info" }>{{ sentence }}</span>
                </div>
                <br>
                {% endif %}
                {% if "DLANN" in choices%}
                <div class="popup" onclick="popupInformation('DLANN_info')">
                    <img src="../../static/Images/information_icon.png" width="20" height="20" />
                    <span style="white-space: pre-wrap" class="popuptext" id="DLANN_info" }>{{ sentence }}</span>
                </div>
                <br>
                {% endif %}
                {% if "NLP" in choices%}
                <div class="popup" onclick="popupInformation('NLP_info')">
                    <img src="../../static/Images/information_icon.png" width="20" height="20" />
                    <span style="white-space: pre-wrap" class="popuptext" id="NLP_info" }>{{ sentence }}</span>
                </div>
                <br>
                {% endif %}
                {% endif %}
                {% endfor %}
                {% endfor %}
                {% endif %}
            </form>
        </div>

        <!-- MLA section-->
        <div class="border-b border-gray-400 p-2">
            <!--<h1 class="mb-2 font-bold text-xl">Method</h1>-->
            <form id="MLA_Form">
                <!-- Section for MLA -->
                <div id="MLA_Options" class="methodology_desc space-y-2 space-x-2">

                    <!-- Dynamically pull algorithms names and create radio buttons for each choice-->
                    <br>
                    Algorithm:
                    {% if g.Algorithms %}
                    <select id="MLalgorithm" class="px-2 py-1 mr-2 rounded-md border border-gray-400" name="MLalgorithm"
                        onchange="changeAlgorithm(this.id, 'Parameters')">
                        {% for choices, infos in g.Algorithms%}
                        <option value={{ choices }}>{{ choices }}</option>
                        {% endfor %}
                    </select>
                    {% endif %}


                    <br>
                    Ensemble method:
                    {% if g.Ensembles %}
                    <select id="EnsembleAlgorithm" class="px-2 py-1 mr-2 rounded-md border border-gray-400"
                        name="EnsembleAlgorithm" onchange="changeEnsemble(this.id, 'Parameters')">
                        {% for choices, infos in g.Ensembles%}
                        <option value={{ choices }}>{{ choices }}</option>
                        {% endfor %}
                    </select>
                    {% endif %}

                    <br><br>
                    For more information on MLA algorithms, visit <a
                        href="https://scikit-learn.org/stable/supervised_learning.html">scikit-learn.org</a>

                    <br><br>

                    <!-- Hyperparameters section-->

                    <div id="Parameters"></div>

                    <div class="border-t border-gray-400 p-2">
                        <!-- Validation section-->
                        <h1 class="mb-2 font-bold text-xl">Validation</h1>

                        <input type="radio" id=K-Fold name="validation" value=K-Fold> <label for=K-Fold>K-Fold</label>
                        <div class="popup" onclick="popupInformation('K-Fold_Info')">
                            <img src="../../static/Images/information_icon.png" width="20" height="20" />
                            <span style="" class="popuptext" id="K-Fold_Info" }>
                                K-fold is a cross-validation technique that divides the dataset into subsets to train and evaluate a machine learning model, common values of k ranging from 5 to 10.
                            </span>
                        </div>
                        <input type="text" class="input-text" id="K-Fold_Input" name="K-Fold_Input">
                        <br>

                        <input type="radio" id=Split name="validation" value=Split checked> <label
                            for=Split>Split</label>
                        <div class="popup" onclick="popupInformation('Split_Info')">
                            <img src="../../static/Images/information_icon.png" width="20" height="20" />
                            <span style="" class="popuptext" id="Split_Info" }>
                                Splitting is a data separation technique where a dataset is divided into training and testing sets to assess the performance of a machine learning model. Range: (0.0 - 1), common_value: 0.2.
                            </span>
                        </div>
                        <input type="text" class="input-text" id="Split_Input" name="Split_Input" required>
                        <br><br>

                        <p><b>Other Options:</b></p>
                        <label for=Random_State>Random State </label>
                        <div class="popup" onclick="popupInformation('Random_State_Info')">
                            <img src="../../static/Images/information_icon.png" width="20" height="20" />
                            <span style="" class="popuptext" id="Random_State_Info" }>
                                Random state is a parameter that ensures reproducibility in machine learning by fixing the random seed to a specific value.
                            </span>
                        </div>
                        <input type="text" class="input-text" id="Random_State_Input" name="Random_State_Input"><br>

                        <label for=Shuffle>Shuffle </label>
                        <div class="popup" onclick="popupInformation('Random_State_Info')">
                            <img src="../../static/Images/information_icon.png" width="20" height="20" />
                            <span style="" class="popuptext" id="Random_State_Info" }>
                                Shuffle is a technique used in machine learning to randomize the order of data instances, facilitating better generalization and reducing bias.
                            </span>
                        </div>
                        <input type="radio" id="Shuffle_True" name="Shuffle" value=True> <label
                            for="Shuffle_True">true</label>
                        <input type="radio" id="Shuffle_False" name="Shuffle" value=False checked> <label
                            for="Shuffle_False">false</label><br>

                        <label for=Shuffle>Stratify </label>
                        <div class="popup" onclick="popupInformation('Stratify_Info')">
                            <img src="../../static/Images/information_icon.png" width="20" height="20" />
                            <span style="" class="popuptext" id="Stratify_Info" }>
                                Stratify is a technique used to ensure proportional representation of classes in training and testing sets, helping to maintain the distribution of classes and improve model performance, especially in imbalanced datasets.
                            </span>
                        </div>
                        <input type="radio" id="Stratify_True" name="Stratify" value=True> <label
                            for="Stratify_True">true</label>
                        <input type="radio" id="Stratify_False" name="Stratify" value=False checked> <label
                            for="Stratify_False">false</label><br>
                    </div>
            </form>
        </div>

        <!-- DLANN section-->
        <div id="DLANN_Options" class="methodology_desc">
            <div class="border-b border-gray-400 p-2">
                <!--<h1 class="mb-2 font-bold text-xl">Method</h1>-->
                <form id="DLANN_Form">
                    <!-- Section for DLANN -->
                    <!-- Methods section-->
                    <h1 class="mb-2 font-bold text-xl">Model Creation</h1>

                    Category:
                    {% if g.NN_layer_Categories %}
                    <select id="layer_categories" class="px-2 py-1 mr-2 rounded-md border border-gray-400"
                        name="layer_categories" onchange="changeLayerCategory(this.id,'layers')">
                        {% for choices, names, infos in g.NN_layer_Categories%}
                        <option value={{ choices }}>{{ names }}</option>
                        {% endfor %}
                    </select>
                    {% endif %}
                    Layer:
                    {% if g.layers %}
                    <select id="layers" class="px-2 py-1 mr-2 rounded-md border border-gray-400" name="layers">
                        {% for choices, names, infos in g.layers%}
                        <option value={{ choices }}>{{ names }}</option>
                        {% endfor %}
                    </select>
                    <button type="button" class="px-2 px-1.5 rounded-lg bg-white border border-gray-400" id="AddLayer"
                        onclick="selectLayers('layers', 'Layers_Selection')">Add</button>
                    <button type="button" class="px-2 px-1.5 rounded-lg bg-white border border-gray-400" id="clearNN"
                        onclick="clearAllNN()"> Remove All </button>
                    {% endif %}




                    <div id="Layers_Selection">
                    </div>


                    <button type="submit" class="my-2 px-2 px-1.5 rounded-lg bg-white border border-gray-400"
                        value="Check"> Check </button>

                    <p id="model_Error"></p>
                    <p id="model_Title">Model Summary:</p>
                    <div style="overflow: auto; max-height: 1000px; max-width: 1100px; ">
                        <p id="model_Results" style="background-color: white;"></p>
                    </div>
                </form>
            </div>

            <!-- Model Compiler section-->
            <div class="border-b border-gray-400 p-2">
                <h1 class="mb-2 font-bold text-xl">Compiler</h1>
                <form id="Model_Compile_Form">
                    <div id="Compile_Selection"></div>
                </form>
            </div>

            <!-- DLANN Validation section-->
            <div class="border-b border-gray-400 p-2">
                <h1 class="mb-2 font-bold text-xl">Validation</h1>
                <form id="Model_Validation_Form">
                    <div id="Validation_Selection"></div>

                    <p><b>Options:</b></p>
                    Callback:
                    {% if g.callbacks %}
                    <select id="callbacks" class="px-2 py-1 mr-2 rounded-md border border-gray-400" name="callbacks">
                        {% for choices, names, infos in g.callbacks%}
                        <option value={{ choices }}>{{ names }}</option>
                        {% endfor %}
                    </select>
                    <button type="button" class="px-2 px-1.5 rounded-lg bg-white border border-gray-400"
                        id="AddCallbacks" onclick="selectCallback('callbacks', 'Callback_Selection')">Add</button>
                    <button type="button" class="px-2 px-1.5 rounded-lg bg-white border border-gray-400"
                        id="clearCallbacks" onclick="clearAllCallbacks()"> Remove All </button>
                    {% endif %}
                    <div id="Callback_Selection"></div>
                </form>
            </div>
        </div>

        <div id="NLP_Options" class="methodology_desc">
            <div class="border-b border-gray-400 p-2">
                <!--<h1 class="mb-2 font-bold text-xl">Method</h1>-->
                <form id="NLP_Form">
                </form>
            </div>
        </div>

        <!-- MLA -->
        <div class="border-b border-gray-400 p-2">
            <form id="MLAI_Form" @submit.prevent="getData(files, fileSelected, choice)">
                <!-- Copy of information from prior sections -->
                <input id="projectName_copy" name="projectName" type="hidden" />
                <input id="phase1Text_copy" name="phase1Text" type="hidden" />
                <input id="csvFile_copy" name="csvFile" type="hidden" />

                <button type="submit" class="px-2 px-1.5 rounded-lg bg-white border border-gray-400" name="submit">
                    Perform Experiment </button>

            </form>
            <!-- NLP -->
            <form id="NLP_button" @submit.prevent="" style="display: none;">
                <button type="submit" class="px-2 px-1.5 rounded-lg bg-white border border-gray-400"
                    name="submit">Performs Experiment</button>
            </form>
        </div>

        <!-- Metrics section-->
        <div id="metrics">
            <div class="border-b border-gray-400 p-2">
                <h1 class="mb-2 font-bold text-xl">Metrics</h1>

                <form id="resultForm"> <!-- Takes you to displayResults function-->
                    <!-- <h2 class="mb-2 text-lg">Regression</h2> -->
                    <div x-data="{ open: 1 }">

                    <input type="radio" name="regression" id="classificationRadio" value="classification" checked @click="open = 1">
                    Classification<br>
                    <!-- <h2 class="mb-2 text-lg">Classification</h2> -->
                    <div id="checkboxesContainer" x-show="open === 1">
                        <div class="border border-gray-300 rounded-md shadow-sm p-2 mb-1 inline-block ml-1">
                            <input type="checkbox" id=Met_WEIGHT1 name="Met_WEIGHT" value=Met_WEIGHT1 checked> <label
                                for=Met_WEIGHT>Weight</label>
                        </div>
                        <br>

                        <div class="border border-gray-300 rounded-md shadow-sm p-2 mb-1 inline-block ml-1 m-3">
                            <input type="checkbox" id=Met_ACC name="Met_ACC" value=Met_ACC checked> <label
                                for=Met_ACC1>Accuracy</label>
                        </div>
                        <br>
                        <div class="border border-gray-300 rounded-md shadow-sm p-2 mb-1 inline-block ml-1">
                            <input type="checkbox" id=Met_Precision name="Met_Precision" value=Met_Precision checked>
                            <label for=Met_Precision>Precision</label>
                        </div>
                        <div class="border border-gray-300 rounded-md shadow-sm p-2 mb-1 inline-block ml-1">
                            <input type="checkbox" id=Met_Precision_Micro name="Met_Precision_Micro"
                                value=Met_Precision_Micro checked> <label for=Met_Precision_Micro>Precision
                                (Micro)</label>
                        </div>
                        <div class="border border-gray-300 rounded-md shadow-sm p-2 mb-1 inline-block ml-1">
                            <input type="checkbox" id=Met_Precision_Macro name="Met_Precision_Macro"
                                value=Met_Precision_Macro checked> <label for=Met_Precision_Macro>Precision
                                (Macro)</label>
                        </div><br>
                        <div class="border border-gray-300 rounded-md shadow-sm p-2 mb-1 inline-block ml-1">
                            <input type="checkbox" id=Met_F1 name="Met_F1" value=Met_F1 checked> <label
                                for=Met_F1>F1</label>
                        </div>
                        <div class="border border-gray-300 rounded-md shadow-sm p-2 mb-1 inline-block ml-1">
                            <input type="checkbox" id=Met_F1_Micro name="Met_F1_Micro" value=Met_F1_Micro checked>
                            <label for=Met_F1_Micro>F1 (Micro)</label>
                        </div>
                        <div class="border border-gray-300 rounded-md shadow-sm p-2 mb-1 inline-block ml-1">
                            <input type="checkbox" id=Met_F1_Macro name="Met_F1_Macro" value=Met_F1_Macro checked>
                            <label for=Met_F1_Macro>F1 (Macro)</label>
                        </div><br>

                        <div class="border border-gray-300 rounded-md shadow-sm p-2 mb-1 inline-block ml-1">
                            <input type="checkbox" id=Met_Recall name="Met_Recall" value=Met_Recall checked> <label
                                for=Met_Recall>Recall</label>
                        </div>
                        <div class="border border-gray-300 rounded-md shadow-sm p-2 mb-1 inline-block ml-1">
                            <input type="checkbox" id=Met_Recall_Micro name="Met_Recall_Micro" value=Met_Recall_Micro
                                checked> <label for=Met_Recall_Micro>Recall (Micro)</label>
                        </div>
                        <div class="border border-gray-300 rounded-md shadow-sm p-2 mb-1 inline-block ml-1">
                            <input type="checkbox" id=Met_Recall_Macro name="Met_Recall_Macro" value=Met_Recall_Macro
                                checked> <label for=Met_Recall_Macro>Recall (Macro)</label>
                        </div><br>
                        <div class="border border-gray-300 rounded-md shadow-sm p-2 mb-1 inline-block ml-1">
                            <input type="checkbox" id=Met_CM name="Met_CM" value=Met_CM checked> <label
                                for=Met_CM>Confusion Matrix</label>
                        </div><br>
                    </div>


                    <input type="radio" name="regression" id="regressionRadio" value="regression" @click="open = 2"> Regression<br>
                    <div id="regressionContainer" x-show="open === 2">
                        <div class="border border-gray-300 rounded-md shadow-sm p-2 mb-1 inline-block ml-1">
                            <input type="checkbox" id=Met_WEIGHT2 name="Met_WEIGHT2" value=Met_WEIGHT2> <label
                                for=Met_WEIGHT2>Weight</label>
                        </div><br>

                        <!-- <h2 class="mb-2 text-lg">Regression</h2> -->
                        <div class="border border-gray-300 rounded-md shadow-sm p-2 mb-1 inline-block ml-1">
                            <input type="checkbox" id=Met_MSE name="Met_MSE" value=Met_MSE> <label
                                for=Met_MSE>MSE</label>
                        </div>
                        <div class="border border-gray-300 rounded-md shadow-sm p-2 mb-1 inline-block ml-1">
                            <input type="checkbox" id=Met_RMSE name="Met_RMSE" value=Met_RMSE> <label
                                for=Met_RMSE>RMSE</label>
                        </div><br>
                        <div class="border border-gray-300 rounded-md shadow-sm p-2 mb-1 inline-block ml-1">
                            <input type="checkbox" id=Met_MAE name="Met_MAE" value=Met_MAE> <label
                                for=Met_MAE>MAE</label>
                        </div><br>

                        <div class="border border-gray-300 rounded-md shadow-sm p-2 mb-1 inline-block ml-1">
                            <input type="checkbox" id=Met_R2 name="Met_R2" value=Met_R2> <label for=Met_R2>R^2</label>
                        </div><br>

                    </div>



                    <!-- <input type="checkbox" id=Met_Recall_Micro name="Met_Recall_Micro" value=Met_Recall_Micro checked> <label for=Met_Recall_Micro>Recall (Micro)</label><br>
                        <input type="checkbox" id=Met_Recall_Macro name="Met_Recall_Macro" value=Met_Recall_Macro checked> <label for=Met_Recall_Macro>Recall (Macro)</label><br>
                        <input type="checkbox" id=Met_CM name="Met_CM" value=Met_CM checked> <label for=Met_CM>Confusion Matrix</label><br> -->

                    <input type="radio" name="regression" id="clusteringRadio" value="clustering" @click="open = 3"> Clustering<br>
                    <div id="clustering" x-show="open === 3">
                        <div class="border border-gray-300 rounded-md shadow-sm p-2 mb-1 inline-block ml-1">
                            <input type="checkbox" id=Met_silhouette name="Met_silhouette" value=Met_silhouette> <label
                                for=Met_silhouette>Silhouette</label>
                        </div><br>
                        
                        <div class="border border-gray-300 rounded-md shadow-sm p-2 mb-1 inline-block ml-1">
                            <input type="checkbox" id=Met_calinski name="Met_calinski" value=Met_calinski> <label
                                for=Met_calinski>Calinski</label>
                        </div>
                        <div class="border border-gray-300 rounded-md shadow-sm p-2 mb-1 inline-block ml-1">
                            <input type="checkbox" id=Met_davies name="Met_davies" value=Met_davies> <label
                                for=Met_davies>Davies</label>
                        </div><br>
                        <div class="border border-gray-300 rounded-md shadow-sm p-2 mb-1 inline-block ml-1">
                            <input type="checkbox" id=Met_ari name="Met_ari" value=Met_ari> <label
                                for=Met_ari>Ari</label>
                        </div><br>

                        <div class="border border-gray-300 rounded-md shadow-sm p-2 mb-1 inline-block ml-1">
                            <input type="checkbox" id=Met_homogeneity name="Met_homogeneity" value=Met_homogeneity>
                            <label for=Met_homogeneity>Homogeneity</label>
                        </div><br>

                        <div class="border border-gray-300 rounded-md shadow-sm p-2 mb-1 inline-block ml-1">
                            <input type="checkbox" id=Met_v_measure name="Met_v_measure" value=Met_v_measure> <label
                                for=Met_v_measure>V_measure</label>
                        </div><br>

                    </div>

                    
                    <button class="px-2 px-1.5 rounded-lg bg-white border border-gray-400" onclick="updateMetrics()">
                        Update metrics
                    </button>

                </form>
            </div>
        </div>
        </div>

        <!-- Results section-->
        <div class="p-2">
            <h1 class="mb-2 font-bold text-xl">Results</h1>

            <p id="Results" style="background-color: white;"></p>


            <button type="button" class="px-2 px-1.5 rounded-lg bg-white border border-gray-400" id="generateReport"
                onclick="generatePDF()">
                Generate PDF report
            </button>

        </div>
    </div>
</div>
</div>

</div>




<!-- This is the old javascript method for running LCA. Will need to change to json file, run on pytho
     n and run on seprate vm later.-->
<script src="../../static/src/Cycon_events.js"></script>

<!-- This is the javascript method for running MLA-->
<!-- The library for the charts -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
{% endblock %}